{"ast":null,"code":"import _regeneratorRuntime from\"/Users/scottwattenbarger/Desktop/Projects/ecommerce/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/scottwattenbarger/Desktop/Projects/ecommerce/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/scottwattenbarger/Desktop/Projects/ecommerce/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useMutation}from'@apollo/client';import Jumbotron from'../components/Jumbotron';import{ADD_ORDER}from'../utils/mutations';import{idbPromise}from'../utils/helpers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Success(){var _useMutation=useMutation(ADD_ORDER),_useMutation2=_slicedToArray(_useMutation,1),addOrder=_useMutation2[0];useEffect(function(){function saveOrder(){return _saveOrder.apply(this,arguments);}function _saveOrder(){_saveOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var cart,products,_yield$addOrder,data,productData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return idbPromise('cart','get');case 2:cart=_context.sent;products=cart.map(function(item){return item._id;});if(!products.length){_context.next=11;break;}_context.next=7;return addOrder({variables:{products:products}});case 7:_yield$addOrder=_context.sent;data=_yield$addOrder.data;productData=data.addOrder.products;productData.forEach(function(item){idbPromise('cart','delete',item);});case 11:setTimeout(function(){window.location.assign('/');},3000);case 12:case\"end\":return _context.stop();}},_callee);}));return _saveOrder.apply(this,arguments);}saveOrder();},[addOrder]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Jumbotron,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Success!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Thank you for your purchase!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"You will now be redirected to the home page\"})]})});}export default Success;","map":{"version":3,"names":["React","useEffect","useMutation","Jumbotron","ADD_ORDER","idbPromise","jsx","_jsx","jsxs","_jsxs","Success","_useMutation","_useMutation2","_slicedToArray","addOrder","saveOrder","_saveOrder","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cart","products","_yield$addOrder","data","productData","wrap","_callee$","_context","prev","next","sent","map","item","_id","length","variables","forEach","setTimeout","window","location","assign","stop","children"],"sources":["/Users/scottwattenbarger/Desktop/Projects/ecommerce/client/src/pages/Success.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Jumbotron from '../components/Jumbotron';\nimport { ADD_ORDER } from '../utils/mutations';\nimport { idbPromise } from '../utils/helpers';\n\nfunction Success() {\n  const [addOrder] = useMutation(ADD_ORDER);\n\n  useEffect(() => {\n    async function saveOrder() {\n      const cart = await idbPromise('cart', 'get');\n      const products = cart.map((item) => item._id);\n\n      if (products.length) {\n        const { data } = await addOrder({ variables: { products } });\n        const productData = data.addOrder.products;\n\n        productData.forEach((item) => {\n          idbPromise('cart', 'delete', item);\n        });\n      }\n\n      setTimeout(() => {\n        window.location.assign('/');\n      }, 3000);\n    }\n\n    saveOrder();\n  }, [addOrder]);\n\n  return (\n    <div>\n      <Jumbotron>\n        <h1>Success!</h1>\n        <h2>Thank you for your purchase!</h2>\n        <h2>You will now be redirected to the home page</h2>\n      </Jumbotron>\n    </div>\n  );\n}\n\nexport default Success;\n"],"mappings":"gcAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,OAASC,SAAS,KAAQ,oBAAoB,CAC9C,OAASC,UAAU,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,IAAAC,YAAA,CAAmBT,WAAW,CAACE,SAAS,CAAC,CAAAQ,aAAA,CAAAC,cAAA,CAAAF,YAAA,IAAlCG,QAAQ,CAAAF,aAAA,IAEfX,SAAS,CAAC,UAAM,SACC,CAAAc,SAASA,CAAA,SAAAC,UAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,WAAA,EAAAA,UAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAxB,SAAAC,QAAA,MAAAC,IAAA,CAAAC,QAAA,CAAAC,eAAA,CAAAC,IAAA,CAAAC,WAAA,QAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACqB,CAAA3B,UAAU,CAAC,MAAM,CAAE,KAAK,CAAC,QAAtCkB,IAAI,CAAAO,QAAA,CAAAG,IAAA,CACJT,QAAQ,CAAGD,IAAI,CAACW,GAAG,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,GAAG,GAAC,KAEzCZ,QAAQ,CAACa,MAAM,EAAAP,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,SACM,CAAAlB,QAAQ,CAAC,CAAEwB,SAAS,CAAE,CAAEd,QAAQ,CAARA,QAAS,CAAE,CAAC,CAAC,QAAAC,eAAA,CAAAK,QAAA,CAAAG,IAAA,CAApDP,IAAI,CAAAD,eAAA,CAAJC,IAAI,CACNC,WAAW,CAAGD,IAAI,CAACZ,QAAQ,CAACU,QAAQ,CAE1CG,WAAW,CAACY,OAAO,CAAC,SAACJ,IAAI,CAAK,CAC5B9B,UAAU,CAAC,MAAM,CAAE,QAAQ,CAAE8B,IAAI,CAAC,CACpC,CAAC,CAAC,CAAC,QAGLK,UAAU,CAAC,UAAM,CACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,GAAG,CAAC,CAC7B,CAAC,CAAE,IAAI,CAAC,CAAC,yBAAAb,QAAA,CAAAc,IAAA,MAAAtB,OAAA,GACV,UAAAN,UAAA,CAAAC,KAAA,MAAAC,SAAA,GAEDH,SAAS,EAAE,CACb,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,mBACEP,IAAA,QAAAsC,QAAA,cACEpC,KAAA,CAACN,SAAS,EAAA0C,QAAA,eACRtC,IAAA,OAAAsC,QAAA,CAAI,UAAQ,EAAK,cACjBtC,IAAA,OAAAsC,QAAA,CAAI,8BAA4B,EAAK,cACrCtC,IAAA,OAAAsC,QAAA,CAAI,6CAA2C,EAAK,GAC1C,EACR,CAEV,CAEA,cAAe,CAAAnC,OAAO"},"metadata":{},"sourceType":"module"}